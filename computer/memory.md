# 存储器层次结构
## 存储技术
计算机中存储器系统一般有这几种。按照速度降序的顺序是寄存器，高速缓存，内存，磁盘，网络。访问寄存器中的数据一般需要0个时钟周期，访问高速缓存中的数据一般需要1～30个时钟周期，访问内存中的数据一般需要50～200个时钟周期，访问磁盘上的数据一般需要几千万个时钟周期。访问网络的速度当然跟网速的快慢相关了。高速缓存分好几层。

书中有个很好的图片让我们理解双稳态，就是倒转的钟摆，虽然会在状态位上抖动，但是最终总是会处于两个稳定状态中的一个。这就是SRAMS(静态RAM)，速度比DRAM(动态RAM)要快。动态RAM对干扰敏感，但是一般变化周期在10～100毫秒，在这个时间内存储器会发现这个变化，并根据校验位将其恢复成原来的状态。所以DRAM也是稳定的。

一块内存一般是由很多个DRAM芯片组成。这里的设计也比较奇葩，一个16个存储超单元的DRAM芯片只有两根地址引脚。他获取一个超单元的数据一般是传两次信号给芯片，第一次传行位置，芯片将整个行复制到芯片的行缓冲区，第二次传列位置，从行缓冲区将数据取出。行和列的值都是0~4所以只要两根地址引脚就能搞定。如果一个超单元存储8位，那么芯片的数据引脚就是8根。

后面DRAM发展了，可以传一次行位置，然后后面传多个列位置来取同一行的不同列的数据。这样就省去了每次都要把行复制到行缓冲区的过程。

## 访问主存
访问主存一般是通过总线来的。总线有两个事务，读事务(从主存传送数据到CPU)和写事务(从CPU传送数据到主存)。总线是一组并行的导线，数据和地址信息可以使用同一组导线，也可以使用不同的。控制线的信号会同步事务，并标识当前正在被执行的事务的类型。比如：当前关注的这个事务是到主存的吗？就还是到其他IO设备，这个事务是读还是写？总线上的信息是地址还是数据项？

IO桥将系统总线的电子信号翻译成存储器总线的电子信号。IO桥也将系统总线和存储器总线连接到IO总线。像磁盘和图形卡这样的IO设备共享IO总线。

## 磁盘存储
磁盘存储这里主要是理解一下概念：
* 盘片。磁道就是盘面上的同心圆。
* 扇区：每个磁道被划分成一组扇区，每个扇区包含相等数量的数据位，扇区之间由一些间隙分隔开。
* 柱面：柱面是所有盘片表面上到主轴中心的距离相等的磁道的集合。
* 记录区：柱面的集合被分割成不相交的子集合，成为记录区。


磁盘容量的计算感觉不是很难，主要是理解那些概念。
磁盘时间的计算有以下几个概念：寻道时间：将磁头移动到合适的磁道上所话费的时间。旋转时间：将磁盘的扇区旋转到磁头之下所花费的时间。传送时间：读取数据所花费的时间。
由于传送时间相对寻道时间和旋转时间很短暂，所以一般计算的时候被忽略。所以磁盘的访问时间＝ 寻道时间 ＋ 旋转时间。好好理解这几个时间还是很有必要的。

睡了。看《深入理解计算机系统》看得快，不如理解。不然我估计我还要回头看第三遍。不过经典的东西是值得看三遍的。晚安。